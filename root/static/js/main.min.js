/*

 HMM logo
 https://github.com/Janelia-Farm-Xfam/hmm_logo_js
 Copyright 2013, Jody Clements.
 Licensed under the MIT License.
 https://github.com/Janelia-Farm-Xfam/hmm_logo_js/blob/master/LICENSE.txt

 Scroller
 http://github.com/zynga/scroller

 Copyright 2011, Zynga Inc.
 Licensed under the MIT License.
 https://raw.github.com/zynga/scroller/master/MIT-LICENSE.txt

 Based on the work of: Unify Project (unify-project.org)
 http://unify-project.org
 Copyright 2011, Deutsche Telekom AG
 License: MIT + Apache (V2)

 Inspired by: https://github.com/inexorabletash/raf-shim/blob/master/raf.js
*/
!function(b){var j=function(a,d){this.$element=b(a);this.$indicators=this.$element.find(".carousel-indicators");this.options=d;"hover"==this.options.pause&&this.$element.on("mouseenter",b.proxy(this.pause,this)).on("mouseleave",b.proxy(this.cycle,this))};j.prototype={cycle:function(a){a||(this.paused=!1);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(b.proxy(this.next,this),this.options.interval));return this},getActiveIndex:function(){this.$active=
this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)},to:function(a){var d=this.getActiveIndex(),f=this;if(!(a>this.$items.length-1||0>a))return this.sliding?this.$element.one("slid",function(){f.to(a)}):d==a?this.pause().cycle():this.slide(a>d?"next":"prev",b(this.$items[a]))},pause:function(a){a||(this.paused=!0);this.$element.find(".next, .prev").length&&b.support.transition.end&&(this.$element.trigger(b.support.transition.end),
this.cycle(!0));clearInterval(this.interval);this.interval=null;return this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(a,d){var f=this.$element.find(".item.active"),c=d||f[a](),m=this.interval,h="next"==a?"left":"right",w="next"==a?"first":"last",o=this;this.sliding=!0;m&&this.pause();c=c.length?c:this.$element.find(".item")[w]();w=b.Event("slide",{relatedTarget:c[0],direction:h});if(!c.hasClass("active")){this.$indicators.length&&
(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var c=b(o.$indicators.children()[o.getActiveIndex()]);c&&c.addClass("active")}));if(b.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(w);if(w.isDefaultPrevented())return;c.addClass(a);c[0].offsetWidth;f.addClass(h);c.addClass(h);this.$element.one(b.support.transition.end,function(){c.removeClass([a,h].join(" ")).addClass("active");f.removeClass(["active",h].join(" "));o.sliding=false;
setTimeout(function(){o.$element.trigger("slid")},0)})}else{this.$element.trigger(w);if(w.isDefaultPrevented())return;f.removeClass("active");c.addClass("active");this.sliding=!1;this.$element.trigger("slid")}m&&this.cycle();return this}}};var e=b.fn.carousel;b.fn.carousel=function(a){return this.each(function(){var d=b(this),f=d.data("carousel"),c=b.extend({},b.fn.carousel.defaults,"object"==typeof a&&a),m="string"==typeof a?a:c.slide;f||d.data("carousel",f=new j(this,c));if("number"==typeof a)f.to(a);
else if(m)f[m]();else c.interval&&f.pause().cycle()})};b.fn.carousel.defaults={interval:5E3,pause:"hover"};b.fn.carousel.Constructor=j;b.fn.carousel.noConflict=function(){b.fn.carousel=e;return this};b(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(a){var d=b(this),f,c=b(d.attr("data-target")||(f=d.attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,""));f=b.extend({},c.data(),d.data());var m;c.carousel(f);(m=d.attr("data-slide-to"))&&c.data("carousel").pause().to(m).cycle();
a.preventDefault()})}(window.jQuery);
!function(b){function j(){if(!f){var c=document.createElement("canvas");f=!(!c.getContext||!c.getContext("2d"))}return f}function e(c,a){a=a||{};this.value=c;this.width=parseInt(a.width,10)||100;"W"===this.value&&(this.width+=30*this.width/100);this.height=parseInt(a.height,10)||100;this.color=a.color||"#000000";this.fontSize=a.fontSize||138;this.scaled=function(){};this.draw=function(c,a,m,d,b,v){var u=c.font;c.transform(m/this.width,0,0,a/this.height,d,b);c.fillStyle=v||this.color;c.textAlign="center";
c.font="bold "+this.fontSize+"px Arial";c.fillText(this.value,0,0);c.setTransform(1,0,0,1,0,0);c.fillStyle="#000000";c.font=u}}function a(){this.grey="#7a7a7a";this.check_PG=function(c,a,d){return d[c].P="#ffff11",d[c].G="#ff7f11",1};this.check_R=function(c,a,d){d[c].R=this.grey;for(var b=["Q","K","R"],f=0,f=0;f<b.length;f++)if(a[0.85][c]===b[f])return d[c].R="#FF9999",1;return"+"===a["0.60"][c]||"R"===a["0.60"][c]||"K"===a["0.60"][c]?(d[c].R="#FF9999",1):1};this.check_Q=function(c,a,d){d[c].Q=this.grey;
var b=["Q","T","K","R"],f=0;if("b"===a["0.50"][c]||"E"===a["0.50"][c]||"Q"===a["0.50"][c])return d[c].Q="#99FF99",1;for(f=0;f<b.length;f++)if(a[0.85][c]===b[f])return d[c].Q="#99FF99",1;return"+"===a["0.60"][c]||"K"===a["0.60"][c]||"R"===a["0.50"][c]?(d[c].Q="#99FF99",1):1};this.check_N=function(c,a,d){d[c].N=this.grey;return"N"===a["0.50"][c]?(d[c].N="#99FF99",1):"D"===a[0.85][c]?(d[c].N="#99FF99",1):1};this.check_K=function(c,a,d){d[c].K=this.grey;var b=["K","R","Q"],f=0;if("+"===a["0.60"][c]||
"R"===a["0.60"][c]||"K"===a["0.60"][c])return d[c].K="#FF9999",1;for(f=0;f<b.length;f++)if(a[0.85][c]===b[f])return d[c].K="#FF9999",1;return 1};this.check_E=function(c,a,d){d[c].E=this.grey;var b=["D","E"],f=0;if("+"===a["0.60"][c]||"R"===a["0.60"][c]||"K"===a["0.60"][c])return d[c].E="#FF9999",1;for(f=0;f<b.length;f++)if(a[0.85][c]===b[f])return d[c].E="#FF9999",1;return"b"===a["0.50"][c]||"E"===a["0.50"][c]||"Q"===a["0.50"][c]?(d[c].E="#FF9999",1):1};this.check_D=function(c,a,d){d[c].D=this.grey;
var b=["D","E","N"],f=0;if("+"===a["0.60"][c]||"R"===a["0.60"][c]||"K"===a["0.60"][c])return d[c].D="#FF9999",1;for(f=0;f<b.length;f++)if(a[0.85][c]===b[f])return d[c].D="#FF9999",1;return"-"===a["0.50"][c]||"E"===a["0.60"][c]||"D"===a["0.60"][c]?(d[c].D="#FF9999",1):1};this.check_ACFILMVW=function(a,d,b){for(var f="ACFLIMVW".split(""),e="ACFHILMVWYPQh".split(""),j=0,n=0,j=0;j<f.length;j++){b[a][f[j]]=this.grey;for(n=0;n<e.length;n++)d["0.60"][a]===e[n]&&(b[a][f[j]]="#9999FF")}return 1};this.check_ST=
function(a,d,b){b[a].S=this.grey;b[a].T=this.grey;var f="ACFHILMVWYPQ".split(""),e=0;if("a"===d["0.50"][a]||"S"===d["0.50"][a]||"T"===d["0.50"][a])return b[a].S="#99FF99",b[a].T="#99FF99",1;for(e=0;e<f.length;e++)if(d[0.85][a]===f[e])return b[a].S="#99FF99",b[a].T="#99FF99",1};this.check_HY=function(a,d,b){b[a].H=this.grey;b[a].Y=this.grey;var f="ACFHILMVWYPQh".split(""),e=0;if("h"===d["0.60"][a])return b[a].H="#99FFFF",b[a].Y="#99FFFF",1;for(e=0;e<f.length;e++)if(d[0.85][a]===f[e])return b[a].H=
"#99FFFF",b[a].Y="#99FFFF",1;return 1};this.color_map=function(a){for(var d=["0.50","0.60","0.80","0.85"],b={W:1,L:1,V:1,I:1,M:1,A:1,F:1,C:1,Y:1,H:1,P:1},f={Q:1,N:1},e={K:1,R:1,H:1},j={S:1,T:1},n={E:1,D:1},v={},u=[],x=0,E=x=0,z=0,B=[],q=null,g={},i=z=null,x=0;x<a.length;x++){q=a[x];for(E=0;E<d.length;E++){i=d[E];g={p:0,o:0,"-":0,"+":0,h:0};for(z=0;z<q.length;z++)B=q[z].split(":"),g[B[0]]=parseFloat(B[1],10),f[B[0]]?g.p+=parseFloat(B[1],10):j[B[0]]?g.o+=parseFloat(B[1],10):n[B[0]]?g["-"]+=parseFloat(B[1],
10):(e[B[0]]&&(g["+"]+=parseFloat(B[1],10)),b[B[0]]&&(g.h+=parseFloat(B[1],10)));var z=i,B=".",l=0,k=null,s=null,G=null,N={".":20,h:11,"+":3,"-":2,o:2,p:2};for(k in g)g.hasOwnProperty(k)&&g[k]>=z&&(s=N[k]||1,G=N[B]||1,G>s?(B=k,l=g[k]):s===G&&g[k]>l&&(B=k,l=g[k]));z=B;v[i]||(v[i]=[]);v[i].push(z)}}for(x=0;x<a.length;x++)u[x]={},this.check_D(x,v,u),this.check_R(x,v,u),this.check_Q(x,v,u),this.check_N(x,v,u),this.check_K(x,v,u),this.check_E(x,v,u),this.check_HY(x,v,u),this.check_ACFILMVW(x,v,u),this.check_ST(x,
v,u),this.check_PG(x,v,u);return u}}function d(c){function d(a,c,b){a.beginPath();a.moveTo(0,c);a.lineTo(b,c);a.lineWidth=1;a.strokeStyle="#999999";a.stroke()}function f(a,d,c,b,m){m=m||"#999999";a.beginPath();a.moveTo(d,c);a.lineTo(d,c+b);a.lineWidth=1;a.strokeStyle=m;a.stroke()}function w(a,d,c,b,f,m,h,g){a.font=f+"px Arial";a.fillStyle=h;a.fillRect(d,c-10,m,14);a.textAlign="center";a.fillStyle=g;a.fillText(b,d+m/2,c)}c=c||{};this.column_width=c.column_width||34;this.height=c.height||300;this.data=
c.data||null;this.debug=c.debug||null;this.scale_height_enabled=c.height_toggle||null;this.zoom_enabled=c.zoom_buttons&&"disabled"===c.zoom_buttons?null:!0;this.colorscheme=c.colorscheme||"default";this.display_ali_map=0;this.alphabet=c.data.alphabet||"dna";this.dom_element=c.dom_element||b("body");this.called_on=c.called_on||null;this.start=c.start||1;this.end=c.end||this.data.height_arr.length;this.default_zoom=this.zoom=parseFloat(c.zoom)||0.4;this.data.processing&&/^observed|weighted/.test(this.data.processing)?
(this.show_inserts=0,this.info_content_height=286):(this.show_inserts=1,this.info_content_height=256);this.data.max_height=c.scaled_max?c.data.max_height_obs||this.data.max_height||2:c.data.max_height_theory||this.data.max_height||2;this.dna_colors={A:"#cbf751",C:"#5ec0cc",G:"#ffdf59",T:"#b51f16",U:"#b51f16"};this.aa_colors={A:"#FF9966",C:"#009999",D:"#FF0000",E:"#CC0033",F:"#00FF00",G:"#f2f20c",H:"#660033",I:"#CC9933",K:"#663300",L:"#FF9933",M:"#CC99CC",N:"#336666",P:"#0099FF",Q:"#6666CC",R:"#990000",
S:"#0000FF",T:"#00FFFF",V:"#FFCC33",W:"#66CC66",Y:"#006600"};this.colors=this.dna_colors;"aa"===this.alphabet&&(this.colors=this.aa_colors);this.canvas_width=5E3;var o=c=null,t=null,n=null;"aa"===this.alphabet&&(o=this.data.probs_arr,o&&(n=new a,this.cmap=n.color_map(o)));this.letters={};for(c in this.colors)this.colors.hasOwnProperty(c)&&(t={color:this.colors[c]},this.letters[c]=new e(c,t));this.scrollme=null;this.previous_target=0;this.rendered=[];this.previous_zoom=0;this.render=function(a){if(this.data){var a=
a||{},d=a.zoom||this.zoom,c=a.target||1,f=(a.scaled||null,b(this.dom_element).parent().width()),m=1,h=null,e=null,g=0;if(c!==this.previous_target){if(this.previous_target=c,a.start&&(this.start=a.start),a.end&&(this.end=a.end),0.1>=d?d=0.1:1<=d&&(d=1),this.zoom=d,h=this.end||this.data.height_arr.length,e=this.start||1,h=h>this.data.height_arr.length?this.data.height_arr.length:h,h=e>h?e:h,e=e>h?h:e,e=1<e?e:1,this.y=this.height-20,this.max_width=this.column_width*(h-e+1),f>this.max_width&&(d=1,this.zoom_enabled=
!1),this.zoom=d,this.zoomed_column=this.column_width*d,this.total_width=this.zoomed_column*(h-e+1),1>d)for(;this.total_width<f&&(this.zoom+=0.1,this.zoomed_column=this.column_width*this.zoom,this.total_width=this.zoomed_column*(h-e+1),this.zoom_enabled=!1,!(1<=d)););c>this.total_width&&(c=this.total_width);b(this.dom_element).attr({width:this.total_width+"px"}).css({width:this.total_width+"px"});a=Math.ceil(this.total_width/this.canvas_width);this.columns_per_canvas=Math.ceil(this.canvas_width/this.zoomed_column);
this.previous_zoom!==this.zoom&&(b(this.dom_element).find("canvas").remove(),this.previous_zoom=this.zoom,this.rendered=[]);this.canvases=[];this.contexts=[];for(g=0;a>g;g++){var f=this.columns_per_canvas*g+e,i=f+this.columns_per_canvas-1;i>h&&(i=h);var l=(i-f+1)*this.zoomed_column;l>m&&(m=l);var k=m*g,s=k+l;if(s+s/2>c&&c>k-k/2&&1!==this.rendered[g]){var k=this.canvases,n=g,w;w=this.dom_element;var F=this.height,o=l,t=g,K=m,I=b(w).find("#canv_"+t);w=(I.length||(b(w).append('<canvas class="canvas_logo" id="canv_'+
t+'"  height="'+F+'" width="'+o+'" style="left:'+K*t+'px"></canvas>'),I=b(w).find("#canv_"+t)),b(I).attr("width",o).attr("height",F),j()||(I[0]=G_vmlCanvasManager.initElement(I[0])),I[0]);(k[n]=w,this.contexts[g]=this.canvases[g].getContext("2d"),this.contexts[g].setTransform(1,0,0,1,0,0),this.contexts[g].clearRect(0,0,l,this.height),this.contexts[g].fillStyle="#ffffff",this.contexts[g].fillRect(0,0,s,this.height),12<this.zoomed_column)?(l=parseInt(10*d,10),l=10<l?10:l,this.debug&&this.render_with_rects(f,
i,g,1),this.render_with_text(f,i,g,l)):this.render_with_rects(f,i,g);this.rendered[g]=1}}this.scrollme||j()&&(this.scrollme=new EasyScroller(b(this.dom_element)[0],{scrollingX:1,scrollingY:0,eventTarget:this.called_on}));1!==c&&j()&&this.scrollme.reflow()}}};this.render_x_axis_label=function(){var a="Model Position";this.display_ali_map&&(a="Alignment Column");b(this.called_on).find(".logo_xaxis").remove();b(this.called_on).prepend('<div class="logo_xaxis" class="centered" style="margin-left:40px"><p class="xaxis_text" style="width:10em;margin:1em auto">'+
a+"</p></div>")};this.render_y_axis_label=function(){b(this.dom_element).parent().before('<canvas class="logo_yaxis" height="300" width="55"></canvas>');var a=b(this.called_on).find(".logo_yaxis"),d=(Math.abs(this.data.max_height),isNaN(this.data.min_height_obs)||parseInt(this.data.min_height_obs,10),null),c="Information Content (bits)";j()||(a[0]=G_vmlCanvasManager.initElement(a[0]));d=a[0].getContext("2d");d.beginPath();d.moveTo(55,1);d.lineTo(40,1);d.moveTo(55,this.info_content_height);d.lineTo(40,
this.info_content_height);d.moveTo(55,this.info_content_height/2);d.lineTo(40,this.info_content_height/2);d.lineWidth=1;d.strokeStyle="#666666";d.stroke();d.fillStyle="#666666";d.textAlign="right";d.font="bold 10px Arial";d.textBaseline="top";d.fillText(parseFloat(this.data.max_height).toFixed(1),38,0);d.textBaseline="middle";d.fillText(parseFloat(this.data.max_height/2).toFixed(1),38,this.info_content_height/2);d.fillText("0",38,this.info_content_height);"score"===this.data.height_calc&&(c="Score (bits)");
d.save();d.translate(5,this.height/2-20);d.rotate(-Math.PI/2);d.textAlign="center";d.font="normal 12px Arial";d.fillText(c,1,0);d.restore();d.fillText("occupancy",55,this.info_content_height+7);this.show_inserts&&(d.fillText("ins. prob.",50,280),d.fillText("ins. len.",46,296))};this.render_x_axis_label();this.render_y_axis_label();this.render_with_text=function(a,c,b,e){var z=0,n=a,q=null,g=0,g=Math.abs(this.data.max_height),q=isNaN(this.data.min_height_obs)?0:parseInt(this.data.min_height_obs,10),
g=g+Math.abs(q),g=Math.round(100*Math.abs(this.data.max_height)/g),g=Math.round(this.info_content_height*g/100),q=this.info_content_height-g;g/this.info_content_height;q/this.info_content_height;c+3<=this.end&&(c+=3);for(g=a;c>=g;g++){if(this.data.mmline&&1===this.data.mmline[g-1])this.contexts[b].fillStyle="#cccccc",this.contexts[b].fillRect(z,10,this.zoomed_column,this.height-40);else if(a=this.data.height_arr[g-1],q=[],a){for(var i=0,l=a.length,k=0,s=null,k=0;l>k;k++){var t=a[k].split(":",2),o=
z+this.zoomed_column/2,F=null;if(0.01<t[1]){var F=parseFloat(t[1])/this.data.max_height,t=this.info_content_height-2-i,y=(this.info_content_height-2)*F;j()||(t+=y*(F/2));q[k]=[y,this.zoomed_column,o,t];i+=y}}for(k=l;0<=k;k--)q[k]&&this.letters[a[k][0]]&&(s="consensus"===this.colorscheme?this.cmap[g-1][a[k][0]]||"#7a7a7a":null,this.letters[a[k][0]].draw(this.contexts[b],q[k][0],q[k][1],q[k][2],q[k][3],s))}q=this.display_ali_map?this.data.ali_map[g-1]:n;0.7>this.zoom?0===g%5&&this.draw_column_divider({context_num:b,
x:z,fontsize:10,column_num:q,ralign:!0}):this.draw_column_divider({context_num:b,x:z,fontsize:e,column_num:q});a=this.height;q=this.data.delete_probs[g-1];i=a-4;l="#ffffff";k="#555555";this.show_inserts&&(i=a-35);0.75>q?(l="#2171b5",k="#ffffff"):0.85>q?l="#6baed6":0.95>q&&(l="#bdd7e7");w(this.contexts[b],z,i,q,e,this.zoomed_column,l,k);f(this.contexts[b],z,this.height-15,5);this.show_inserts&&(a=this.contexts[b],q=z,i=this.height,l=this.zoomed_column,k=this.data.insert_probs[g-1],s=i-20,o="#ffffff",
F="#555555",0.1<k?(o="#d7301f",F="#ffffff"):0.05<k?o="#fc8d59":0.03<k&&(o="#fdcc8a"),w(a,q,s,k,e,l,o,F),0.03<k&&f(a,q+l,i-30,-30-i,o),a=this.data.insert_lengths[g-1],q="#ffffff",i="#555555",9<a?(q="#d7301f",i="#ffffff"):7<a?q="#fc8d59":4<a&&(q="#fdcc8a"),w(this.contexts[b],z,this.height-5,a,e,this.zoomed_column,q,i),f(this.contexts[b],z,this.height-45,5),f(this.contexts[b],z,this.height-30,5));z+=this.zoomed_column;n++}this.show_inserts&&(d(this.contexts[b],this.height-30,this.total_width),d(this.contexts[b],
this.height-45,this.total_width));d(this.contexts[b],this.height-15,this.total_width);d(this.contexts[b],0,this.total_width)};this.draw_column_divider=function(a){var d=a.ralign?a.x+this.zoomed_column:a.x,c=a.ralign?a.x+2:a.x;f(this.contexts[a.context_num],d,this.height-30,-30-this.height,"#dddddd");f(this.contexts[a.context_num],d,0,5);var d=this.contexts[a.context_num],b=this.zoomed_column,m=a.column_num,e=a.ralign;d.font=a.fontsize+"px Arial";d.textAlign=e?"right":"center";d.fillStyle="#666666";
d.fillText(m,c+b/2,10)};this.render_with_rects=function(a,c,b,e){for(var j=0,n=a,q=null,g=0,g=Math.abs(this.data.max_height),i=Math.abs(this.data.min_height_obs),g=Math.round(100*Math.abs(this.data.max_height)/(g+i)),g=Math.round(this.info_content_height*g/100),i=(this.info_content_height-g,10),g=a;c>=g;g++){if(this.data.mmline&&1===this.data.mmline[g-1])this.contexts[b].fillStyle="#cccccc",this.contexts[b].fillRect(j,10,this.zoomed_column,this.height-40);else for(var a=this.data.height_arr[g-1],
q=0,l=a.length,k=0,k=0;l>k;k++){var s=a[k].split(":",2);if(0.01<s[1]){var w=parseFloat(s[1])/this.data.max_height,t=j,w=(this.info_content_height-2)*w,o=this.info_content_height-2-q-w,y=null,y="consensus"===this.colorscheme?this.cmap[g-1][s[0]]||"#7a7a7a":this.colors[s[0]];e?(this.contexts[b].strokeStyle=y,this.contexts[b].strokeRect(t,o,this.zoomed_column,w)):(this.contexts[b].fillStyle=y,this.contexts[b].fillRect(t,o,this.zoomed_column,w));q+=w}}0.2>this.zoom?i=20:0.3>this.zoom&&(i=10);0===g%i&&
(f(this.contexts[b],j+this.zoomed_column,this.height-30,parseFloat(this.height),"#dddddd"),f(this.contexts[b],j+this.zoomed_column,0,5),q=this.display_ali_map?this.data.ali_map[g-1]:n,a=this.contexts[b],l=j-2,k=this.zoomed_column,a.font="10px Arial",a.textAlign="right",a.fillStyle="#666666",a.fillText(q,l+k/2,10));a=this.contexts[b];q=j;l=this.height-42;k=this.zoomed_column;s=this.data.insert_probs[g-1];t=this.data.insert_lengths[g-1];w=this.data.delete_probs[g-1];o="#ffffff";this.show_inserts?(0.1<
s?o="#d7301f":0.05<s?o="#fc8d59":0.03<s&&(o="#fdcc8a"),a.fillStyle=o,a.fillRect(q,l+15,k,10),o="#ffffff",9<t?o="#d7301f":7<t?o="#fc8d59":4<t&&(o="#fdcc8a"),a.fillStyle=o,a.fillRect(q,l+30,k,10)):l+=30;o="#ffffff";0.75>w?o="#2171b5":0.85>w?o="#6baed6":0.95>w&&(o="#bdd7e7");a.fillStyle=o;a.fillRect(q,l,k,10);this.show_inserts?d(this.contexts[b],this.height-45,this.total_width):d(this.contexts[b],this.height-15,this.total_width);d(this.contexts[b],0,this.total_width);j+=this.zoomed_column;n++}};this.toggle_colorscheme=
function(a){var d=this.current_column();this.colorscheme=a?"default"===a?"default":"consensus":"default"===this.colorscheme?"consensus":"default";this.rendered=[];this.scrollme.reflow();this.scrollToColumn(d+1);this.scrollToColumn(d)};this.toggle_scale=function(a){var d=this.current_column();this.data.max_height=a?"obs"===a?this.data.max_height_obs:this.data.max_height_theory:this.data.max_height===this.data.max_height_obs?this.data.max_height_theory:this.data.max_height_obs;this.rendered=[];b(this.called_on).find(".logo_yaxis").remove();
this.render_y_axis_label();this.scrollme.reflow();this.scrollToColumn(d+1);this.scrollToColumn(d)};this.toggle_ali_map=function(a){var d=this.current_column();this.display_ali_map=a?"model"===a?0:1:1===this.display_ali_map?0:1;this.render_x_axis_label();this.rendered=[];this.scrollme.reflow();this.scrollToColumn(d+1);this.scrollToColumn(d)};this.current_column=function(){var a=this.column_width*this.zoom,d=this.scrollme.scroller.getValues().left/a,a=b(this.called_on).find(".logo_container").width()/
a/2;return Math.ceil(d+a)};this.change_zoom=function(a){var d=0.3,c=null;if(a.target?d=a.target:a.distance&&(d=(parseFloat(this.zoom)-parseFloat(a.distance)).toFixed(1),"+"===a.direction&&(d=(parseFloat(this.zoom)+parseFloat(a.distance)).toFixed(1))),1<d?d=1:0.1>d&&(d=0.1),c=b(this.called_on).find(".logo_graphic").width()*d/this.zoom,c>b(this.called_on).find(".logo_container").width())a.column?(this.zoom=d,this.render({zoom:this.zoom}),this.scrollme.reflow(),this.scrollme.scroller.scrollTo(this.coordinatesFromColumn(a.column)-
a.offset)):(a=this.current_column(),this.zoom=d,this.render({zoom:this.zoom}),this.scrollme.reflow(),this.scrollToColumn(a));return this.zoom};this.columnFromCoordinates=function(a){return Math.ceil(a/(this.column_width*this.zoom))};this.coordinatesFromColumn=function(a){return(a-1)*this.column_width*this.zoom+this.column_width*this.zoom/2};this.scrollToColumn=function(a,d){var c=b(this.called_on).find(".logo_container").width()/2;this.scrollme.scroller.scrollTo(this.coordinatesFromColumn(a)-c,0,
d)}}var f=null;b.fn.hmm_logo=function(a){var f=null,h=b('<div class="logo_graphic">');if(j()){if(a=a||{},b(this).append(b('<div class="logo_container">').append(h).append('<div class="logo_divider">')),a.data=b(this).data("logo"),null===a.data)return;a.dom_element=h;a.called_on=this;var e=b('<form class="logo_form"><fieldset><label for="position">Column number</label><input type="text" name="position" class="logo_position"></input><button class="button logo_change">Go</button></fieldset></form>'),
o=b('<div class="logo_controls">'),t=b('<div class="logo_settings">');if(t.append('<span class="close">x</span>'),f=new d(a),f.render(a),f.zoom_enabled&&o.append('<button class="logo_zoomout button">-</button><button class="logo_zoomin button">+</button>'),f.scale_height_enabled&&f.data.max_height_obs<f.data.max_height_theory){var n="",v="",u="",x="";f.data.max_height_obs===f.data.max_height?n="checked":v="checked";a.help&&(x='<a class="help" href="/help#scale_obs" title="Set the y-axis maximum to the maximum observed height."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',
u='<a class="help" href="/help#scale_theory" title="Set the y-axis maximum to the theoretical maximum height"><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>');t.append('<fieldset><legend>Scale</legend><label><input type="radio" name="scale" class="logo_scale" value="obs" '+n+"/>Maximum Observed "+x+'</label></br><label><input type="radio" name="scale" class="logo_scale" value="theory" '+v+"/>Maximum Theoretical "+u+"</label></fieldset>")}"score"!==f.data.height_calc&&
("aa"===f.data.alphabet&&f.data.probs_arr)&&(v=n=null,x=u="","default"===f.colorscheme?n="checked":v="checked",a.help&&(u='<a class="help" href="/help#colors_default" title="Each letter receives its own color."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',x='<a class="help" href="/help#colors_consensus" title="Letters are colored as in Clustalx and Jalview, with colors depending on composition of the column."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>'),
t.append('<fieldset><legend>Color Scheme</legend><label><input type="radio" name="color" class="logo_color" value="default" '+n+"/>Default "+u+'</label></br><label><input type="radio" name="color" class="logo_color" value="consensus" '+v+"/>Consensus Colors "+x+"</label></fieldset>"));f.data.ali_map&&(v=n=null,x=u="",0===f.display_ali_map?n="checked":v="checked",a.help&&(u='<a class="help" href="/help#coords_model" title="The coordinates along the top of the plot show the model position."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',
x='<a class="help" href="/help#coords_ali" title="The coordinates along the top of the plot show the column in the alignment associated with the model"><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>'),t.append('<fieldset><legend>Coordinates</legend><label><input type="radio" name="coords" class="logo_ali_map" value="model" '+n+"/>Model "+u+'</label></br><label><input type="radio" name="coords" class="logo_ali_map" value="alignment" '+v+"/>Alignment "+x+"</label></fieldset>"));
0<t.children().length&&(o.append('<button class="logo_settings_switch button">Settings</button>'),o.append(t));e.append(o);b(this).append(e);b(this).find(".logo_settings_switch, .logo_settings .close").bind("click",function(a){a.preventDefault();b(".logo_settings").toggle()});b(this).find(".logo_reset").bind("click",function(a){a.preventDefault();a=f;a.change_zoom({target:a.default_zoom})});b(this).find(".logo_change").bind("click",function(a){a.preventDefault()});b(this).find(".logo_zoomin").bind("click",
function(a){a.preventDefault();f.change_zoom({distance:0.1,direction:"+"})});b(this).find(".logo_zoomout").bind("click",function(a){a.preventDefault();f.change_zoom({distance:0.1,direction:"-"})});b(this).find(".logo_scale").bind("change",function(){f.toggle_scale(this.value)});b(this).find(".logo_color").bind("change",function(){f.toggle_colorscheme(this.value)});b(this).find(".logo_ali_map").bind("change",function(){f.toggle_ali_map(this.value)});b(this).find(".logo_position").bind("change",function(){var a=
f;this.value.match(/^\d+$/m)&&a.scrollToColumn(this.value,1)});h.bind("dblclick",function(a){var d=f,c=b(this).offset(),c=parseInt(a.pageX-c.left,10),a=a.pageX-b(this).parent().offset().left,c=d.columnFromCoordinates(c);d.change_zoom(1>d.zoom?{target:1,offset:a,column:c}:{target:0.3,offset:a,column:c})});a.column_info&&h.bind("click",function(d){var h=f,e=b('<table class="logo_col_info"></table>'),j="<tr>",g="",i=b(this).offset(),i=parseInt(d.pageX-i.left,10),d=(d.pageX-b(this).parent().offset().left,
h.columnFromCoordinates(i)),h=[],l=i=0,k=0,k="Probability";f.data.height_calc&&"score"===f.data.height_calc?(k="Score",h=f.data.height_arr[d-1].slice(0).reverse()):h=f.data.probs_arr[d-1].slice(0).reverse();i=Math.ceil(h.length/5);for(l=0;i>l;l++)j=j+(i>1&&i-1>l?'<th>Residue</th><th class="odd">'+k+"</th>":"<th>Residue</th><th>"+k+"</th>");e.append(b(j+"</tr>"));for(l=0;5>l;l++){g=g+"<tr>";for(k=l;h[k];){var j=h[k].split(":",2),o="";"default"===f.colorscheme&&(o=f.alphabet+"_"+j[0]);g=g+(i>1&&15>
k?'<td class="'+o+'"><div></div>'+j[0]+'</td><td class="odd">'+j[1]+"</td>":'<td class="'+o+'"><div></div>'+j[0]+"</td><td>"+j[1]+"</td>");k=k+5}g=g+"</tr>"}e.append(b(g));b(a.column_info).empty().append(b("<p> Column:"+d+"</p><div><p>Occupancy: "+f.data.delete_probs[d-1]+"</p><p>Insert Probability: "+f.data.insert_probs[d-1]+"</p><p>Insert Length: "+f.data.insert_lengths[d-1]+"</p></div>")).append(e).show()});b(document).bind(this.attr("id")+".scrolledTo",function(a,d){f.render({target:d})});b(document).keydown(function(a){a.ctrlKey||
((61===a.which||107===a.which)&&f.change_zoom({distance:0.1,direction:"+"}),(109===a.which||0===a.which)&&f.change_zoom({distance:0.1,direction:"-"}))})}else b("#logo").replaceWith(b("#no_canvas").html());return f}}(jQuery);
(function(b){if(!b.requestAnimationFrame){var j=Date.now||function(){return+new Date},e=Object.keys||function(a){var d={},c;for(c in a)d[c]=!0;return d},a=Object.empty||function(a){for(var d in a)return!1;return!0},d=function(){for(var a=["webkit","moz","o","ms"],d=0;4>d;d++)if(null!=b[a[d]+"RequestAnimationFrame"])return a[d]}();if(d)return b.requestAnimationFrame=b[d+"RequestAnimationFrame"],void(b.cancelRequestAnimationFrame=b[d+"CancelRequestAnimationFrame"]);var f={},c=1,m=null;b.requestAnimationFrame=
function(a){var d=c++;return f[d]=a,null===m&&(m=setTimeout(function(){var a=j(),d=f,c=e(d);f={};m=null;for(var b=0,h=c.length;h>b;b++)d[c[b]](a)},1E3/60)),d};b.cancelRequestAnimationFrame=function(d){delete f[d];a(f)&&(clearTimeout(m),m=null)}}})(this);
(function(b){var j=Date.now||function(){return+new Date},e={},a=1;b.core?core.effect||(core.effect={}):b.core={effect:{}};core.effect.Animate={stop:function(a){var b=null!=e[a];return b&&(e[a]=null),b},isRunning:function(a){return null!=e[a]},start:function(d,b,c,m,h,w){var o=j(),t=o,n=0,v=0,u=a++;if(w||(w=document.body),0===u%20){var x={},E;for(E in e)x[E]=!0;e=x}var z=function(a){var a=!0!==a,q=j();if(!e[u]||b&&!b(u))return e[u]=null,void(c&&c(60-v/((q-o)/1E3),u,!1));if(a)for(var g=Math.round((q-
t)/(1E3/60))-1,i=0;i<Math.min(g,4);i++)z(!0),v++;m&&(n=(q-o)/m,1<n&&(n=1));g=h?h(n):n;!1!==d(g,q,a)&&1!==n||!a?a&&(t=q,requestAnimationFrame(z,w)):(e[u]=null,c&&c(60-v/((q-o)/1E3),u,1===n||null==m))};return e[u]=!0,requestAnimationFrame(z,w),u}}})(this);
var EasyScroller=function(b,j){this.content=b;this.container=b.parentNode;this.options=j||{};var e=this;this.scroller=new Scroller(function(a,d,b){e.render(a,d,b)},j);this.bindEvents();this.content.style[EasyScroller.vendorPrefix+"TransformOrigin"]="left top";this.reflow()};
EasyScroller.prototype.render=function(){var b,j=document.documentElement.style;window.opera&&"[object Opera]"===Object.prototype.toString.call(opera)?b="presto":"MozAppearance"in j?b="gecko":"WebkitAppearance"in j?b="webkit":"string"==typeof navigator.cpuClass&&(b="trident");b=EasyScroller.vendorPrefix={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[b];var j=document.createElement("div"),e=b+"Transform";return void 0!==j.style[b+"Perspective"]?function(a,d,b){this.content.style[e]="translate3d("+
-a+"px,"+-d+"px,0) scale("+b+")"}:void 0!==j.style[e]?function(a,d,b){this.content.style[e]="translate("+-a+"px,"+-d+"px) scale("+b+")"}:function(a,d,b){this.content.style.marginLeft=a?-a/b+"px":"";this.content.style.marginTop=d?-d/b+"px":"";this.content.style.zoom=b||""}}();
EasyScroller.prototype.reflow=function(){this.scroller.setDimensions(this.container.clientWidth,this.container.clientHeight,this.content.offsetWidth,this.content.offsetHeight);var b=this.container.getBoundingClientRect();this.scroller.setPosition(b.left+this.container.clientLeft,b.top+this.container.clientTop)};
EasyScroller.prototype.bindEvents=function(){var b=this;if($(window).bind("resize",function(){b.reflow()}),$("#modelTab").bind("click",function(){b.reflow()}),"ontouchstart"in window)this.container.addEventListener("touchstart",function(e){e.touches[0]&&e.touches[0].target&&e.touches[0].target.tagName.match(/input|textarea|select/i)||(b.scroller.doTouchStart(e.touches,(new Date).getTime()),e.preventDefault())},!1),document.addEventListener("touchmove",function(e){b.scroller.doTouchMove(e.touches,
(new Date).getTime(),e.scale)},!1),document.addEventListener("touchend",function(){b.scroller.doTouchEnd((new Date).getTime())},!1),document.addEventListener("touchcancel",function(){b.scroller.doTouchEnd((new Date).getTime())},!1);else{var j=!1;$(this.container).bind("mousedown",function(e){e.target.tagName.match(/input|textarea|select/i)||(b.scroller.doTouchStart([{pageX:e.pageX,pageY:e.pageY}],(new Date).getTime()),j=!0,e.preventDefault())});$(document).bind("mousemove",function(e){j&&(b.scroller.doTouchMove([{pageX:e.pageX,
pageY:e.pageY}],(new Date).getTime()),j=!0)});$(document).bind("mouseup",function(){j&&(b.scroller.doTouchEnd((new Date).getTime()),j=!1)});$(this.container).bind("mousewheel",function(e){b.options.zooming&&(b.scroller.doMouseZoom(e.wheelDelta,(new Date).getTime(),e.pageX,e.pageY),e.preventDefault())})}};var Scroller;
!function(){Scroller=function(a,b){this.__callback=a;this.options={scrollingX:!0,scrollingY:!0,animating:!0,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:0.5,maxZoom:3,eventTarget:null};for(var c in b)this.options[c]=b[c]};var b=function(a){return Math.pow(a-1,3)+1},j=function(a){return 1>(a/=0.5)?0.5*Math.pow(a,3):0.5*(Math.pow(a-2,3)+2)},e={__isSingleTouch:!1,__isTracking:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,
__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,
__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(a,b,c,e){a&&(this.__clientWidth=a);b&&(this.__clientHeight=b);c&&(this.__contentWidth=c);e&&(this.__contentHeight=e);this.__computeScrollMax();this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},setPosition:function(a,b){this.__clientLeft=a||0;this.__clientTop=b||0},setSnapSize:function(a,b){this.__snapWidth=a;this.__snapHeight=b},activatePullToRefresh:function(a,b,c,e){this.__refreshHeight=
a;this.__refreshActivate=b;this.__refreshDeactivate=c;this.__refreshStart=e},finishPullToRefresh:function(){this.__refreshActive=!1;this.__refreshDeactivate&&this.__refreshDeactivate();this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},getValues:function(){return{left:this.__scrollLeft,top:this.__scrollTop,zoom:this.__zoomLevel}},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo:function(a,b,c,e){if(!this.options.zooming)throw Error("Zooming is not enabled!");
this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1);var h=this.__zoomLevel;null==c&&(c=this.__clientWidth/2);null==e&&(e=this.__clientHeight/2);a=Math.max(Math.min(a,this.options.maxZoom),this.options.minZoom);this.__computeScrollMax(a);c=(c+this.__scrollLeft)*a/h-c;e=(e+this.__scrollTop)*a/h-e;c>this.__maxScrollLeft?c=this.__maxScrollLeft:0>c&&(c=0);e>this.__maxScrollTop?e=this.__maxScrollTop:0>e&&(e=0);this.__publish(c,e,a,b)},zoomBy:function(a,b,c,
e){this.zoomTo(this.__zoomLevel*a,b,c,e)},scrollTo:function(a,b,c,e){$(document).trigger(this.options.eventTarget.attr("id")+".scrolledTo",[a,b,e]);if(this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1),null!=e&&e!==this.__zoomLevel){if(!this.options.zooming)throw Error("Zooming is not enabled!");a*=e;b*=e;this.__computeScrollMax(e)}else e=this.__zoomLevel;this.options.scrollingX?this.options.paging?a=Math.round(a/this.__clientWidth)*this.__clientWidth:
this.options.snapping&&(a=Math.round(a/this.__snapWidth)*this.__snapWidth):a=this.__scrollLeft;this.options.scrollingY?this.options.paging?b=Math.round(b/this.__clientHeight)*this.__clientHeight:this.options.snapping&&(b=Math.round(b/this.__snapHeight)*this.__snapHeight):b=this.__scrollTop;a=Math.max(Math.min(this.__maxScrollLeft,a),0);b=Math.max(Math.min(this.__maxScrollTop,b),0);a===this.__scrollLeft&&b===this.__scrollTop&&(c=!1);this.__publish(a,b,e,c)},scrollBy:function(a,b,c){this.scrollTo((this.__isAnimating?
this.__scheduledLeft:this.__scrollLeft)+(a||0),(this.__isAnimating?this.__scheduledTop:this.__scrollTop)+(b||0),c)},doMouseZoom:function(a,b,c,e){return this.zoomTo(this.__zoomLevel*(0<a?0.97:1.03),!1,c-this.__clientLeft,e-this.__clientTop)},doTouchStart:function(a,b){if(null==a.length)throw Error("Invalid touch list: "+a);if(b instanceof Date&&(b=b.valueOf()),"number"!=typeof b)throw Error("Invalid timestamp value: "+b);this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=
!1);this.__isAnimating&&(core.effect.Animate.stop(this.__isAnimating),this.__isAnimating=!1);var c,e,h=1===a.length;h?(c=a[0].pageX,e=a[0].pageY):(c=Math.abs(a[0].pageX+a[1].pageX)/2,e=Math.abs(a[0].pageY+a[1].pageY)/2);this.__initialTouchLeft=c;this.__initialTouchTop=e;this.__zoomLevelStart=this.__zoomLevel;this.__lastTouchLeft=c;this.__lastTouchTop=e;this.__lastTouchMove=b;this.__lastScale=1;this.__enableScrollX=!h&&this.options.scrollingX;this.__enableScrollY=!h&&this.options.scrollingY;this.__isTracking=
!0;this.__isDragging=!h;this.__isSingleTouch=h;this.__positions=[]},doTouchMove:function(a,b,c){if(null==a.length)throw Error("Invalid touch list: "+a);if(b instanceof Date&&(b=b.valueOf()),"number"!=typeof b)throw Error("Invalid timestamp value: "+b);if(this.__isTracking){var e,h;2===a.length?(e=Math.abs(a[0].pageX+a[1].pageX)/2,h=Math.abs(a[0].pageY+a[1].pageY)/2):(e=a[0].pageX,h=a[0].pageY);a=this.__positions;if(this.__isDragging){var j=e-this.__lastTouchLeft,o=h-this.__lastTouchTop,t=this.__scrollLeft,
n=this.__scrollTop,v=this.__zoomLevel;if(null!=c&&this.options.zooming){var u=v;if(v=v/this.__lastScale*c,v=Math.max(Math.min(v,this.options.maxZoom),this.options.minZoom),u!==v){var x=e-this.__clientLeft,E=h-this.__clientTop,t=(x+t)*v/u-x,n=(E+n)*v/u-E;this.__computeScrollMax(v)}}this.__enableScrollX&&(t-=j,u=this.__maxScrollLeft,(t>u||0>t)&&(this.options.bouncing?t+=j/2:t=t>u?u:0));this.__enableScrollY&&(n-=o,j=this.__maxScrollTop,(n>j||0>n)&&(this.options.bouncing?(n+=o/2,this.__enableScrollX||
null==this.__refreshHeight||(!this.__refreshActive&&n<=-this.__refreshHeight?(this.__refreshActive=!0,this.__refreshActivate&&this.__refreshActivate()):this.__refreshActive&&n>-this.__refreshHeight&&(this.__refreshActive=!1,this.__refreshDeactivate&&this.__refreshDeactivate()))):n=n>j?j:0));60<a.length&&a.splice(0,30);a.push(t,n,b);this.__publish(t,n,v)}else o=this.options.locking?3:0,t=Math.abs(e-this.__initialTouchLeft),n=Math.abs(h-this.__initialTouchTop),this.__enableScrollX=this.options.scrollingX&&
t>=o,this.__enableScrollY=this.options.scrollingY&&n>=o,a.push(this.__scrollLeft,this.__scrollTop,b),this.__isDragging=(this.__enableScrollX||this.__enableScrollY)&&(5<=t||5<=n);this.__lastTouchLeft=e;this.__lastTouchTop=h;this.__lastTouchMove=b;this.__lastScale=c}},doTouchEnd:function(a){if(a instanceof Date&&(a=a.valueOf()),"number"!=typeof a)throw Error("Invalid timestamp value: "+a);if(this.__isTracking){if(this.__isTracking=!1,this.__isDragging&&(this.__isDragging=!1,this.__isSingleTouch&&this.options.animating&&
100>=a-this.__lastTouchMove)){for(var b=this.__positions,c=b.length-1,e=c,h=c;0<h&&b[h]>this.__lastTouchMove-100;h-=3)e=h;e!==c&&(c=b[c]-b[e],h=this.__scrollTop-b[e-1],this.__decelerationVelocityX=(this.__scrollLeft-b[e-2])/c*(1E3/60),this.__decelerationVelocityY=h/c*(1E3/60),b=this.options.paging||this.options.snapping?4:1,(Math.abs(this.__decelerationVelocityX)>b||Math.abs(this.__decelerationVelocityY)>b)&&(this.__refreshActive||this.__startDeceleration(a)))}this.__isDecelerating||(this.__refreshActive&&
this.__refreshStart?(this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0),this.__refreshStart&&this.__refreshStart()):(this.scrollTo(this.__scrollLeft,this.__scrollTop,!0,this.__zoomLevel),this.__refreshActive&&(this.__refreshActive=!1,this.__refreshDeactivate&&this.__refreshDeactivate())));this.__positions.length=0}},__publish:function(a,e,c,m){var h=this,w=h.__isAnimating;if(w&&(core.effect.Animate.stop(w),h.__isAnimating=!1),m&&h.options.animating){h.__scheduledLeft=a;h.__scheduledTop=
e;h.__scheduledZoom=c;var o=h.__scrollLeft,t=h.__scrollTop,n=h.__zoomLevel,v=a-o,u=e-t,x=c-n;h.__isAnimating=core.effect.Animate.start(function(a,b,c){c&&(h.__scrollLeft=o+v*a,h.__scrollTop=t+u*a,h.__zoomLevel=n+x*a,h.__callback&&h.__callback(h.__scrollLeft,h.__scrollTop,h.__zoomLevel))},function(a){return h.__isAnimating===a},function(a,b){b===h.__isAnimating&&(h.__isAnimating=!1);h.options.zooming&&h.__computeScrollMax()},250,w?b:j)}else h.__scheduledLeft=h.__scrollLeft=a,h.__scheduledTop=h.__scrollTop=
e,h.__scheduledZoom=h.__zoomLevel=c,h.__callback&&h.__callback(a,e,c),h.options.zooming&&h.__computeScrollMax()},__computeScrollMax:function(a){null==a&&(a=this.__zoomLevel);this.__maxScrollLeft=Math.max(this.__contentWidth*a-this.__clientWidth,0);this.__maxScrollTop=Math.max(this.__contentHeight*a-this.__clientHeight,0)},__startDeceleration:function(){var a=this;if(a.options.paging){var b=Math.max(Math.min(a.__scrollLeft,a.__maxScrollLeft),0),c=Math.max(Math.min(a.__scrollTop,a.__maxScrollTop),0),
e=a.__clientWidth,h=a.__clientHeight;a.__minDecelerationScrollLeft=Math.floor(b/e)*e;a.__minDecelerationScrollTop=Math.floor(c/h)*h;a.__maxDecelerationScrollLeft=Math.ceil(b/e)*e;a.__maxDecelerationScrollTop=Math.ceil(c/h)*h}else a.__minDecelerationScrollLeft=0,a.__minDecelerationScrollTop=0,a.__maxDecelerationScrollLeft=a.__maxScrollLeft,a.__maxDecelerationScrollTop=a.__maxScrollTop;var j=a.options.snapping?4:0.1;a.__isDecelerating=core.effect.Animate.start(function(b,c,e){a.__stepThroughDeceleration(e)},
function(){return Math.abs(a.__decelerationVelocityX)>=j||Math.abs(a.__decelerationVelocityY)>=j},function(){a.__isDecelerating=!1;a.scrollTo(a.__scrollLeft,a.__scrollTop,a.options.snapping)})},__stepThroughDeceleration:function(a){var b=this.__scrollLeft+this.__decelerationVelocityX,c=this.__scrollTop+this.__decelerationVelocityY;if(!this.options.bouncing){var e=Math.max(Math.min(this.__maxScrollLeft,b),0);e!==b&&(b=e,this.__decelerationVelocityX=0);e=Math.max(Math.min(this.__maxScrollTop,c),0);
e!==c&&(c=e,this.__decelerationVelocityY=0)}if(a?this.__publish(b,c,this.__zoomLevel):(this.__scrollLeft=b,this.__scrollTop=c),!this.options.paging)this.__decelerationVelocityX*=0.95,this.__decelerationVelocityY*=0.95;this.options.bouncing&&(e=a=0,b<this.__minDecelerationScrollLeft?a=this.__minDecelerationScrollLeft-b:b>this.__maxDecelerationScrollLeft&&(a=this.__maxDecelerationScrollLeft-b),c<this.__minDecelerationScrollTop?e=this.__minDecelerationScrollTop-c:c>this.__maxDecelerationScrollTop&&(e=
this.__maxDecelerationScrollTop-c),0!==a&&(0>=a*this.__decelerationVelocityX?this.__decelerationVelocityX+=0.03*a:this.__decelerationVelocityX=0.08*a),0!==e&&(0>=e*this.__decelerationVelocityY?this.__decelerationVelocityY+=0.03*e:this.__decelerationVelocityY=0.08*e))}},a;for(a in e)Scroller.prototype[a]=e[a]}();
(function(b,j,e){(function(a){"function"===typeof define&&define.amd?define(["jquery","imagesloaded"],a):jQuery&&!jQuery.fn.qtip&&a(jQuery)})(function(a){function d(p,b,L,c){this.id=L;this.target=p;this.tooltip=l;this.elements=elements={target:p};this._id=y+"-"+L;this.timers={img:{}};this.options=b;this.plugins={};this.cache=cache={event:{},target:a(),disabled:i,attr:c,onTooltip:i,lastClass:""};this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=
i}function f(p){return p===l||"object"!==a.type(p)}function c(p){return!(a.isFunction(p)||p&&p.attr||p.length||"object"===a.type(p)&&(p.jquery||p.then))}function m(p){var b,L,d,e;if(f(p))return i;f(p.metadata)&&(p.metadata={type:p.metadata});if("content"in p&&(b=p.content,f(b)||b.jquery||b.done?b=p.content={text:L=c(b)?i:b}:L=b.text,"ajax"in b&&(e=(d=b.ajax)&&d.once!==i,delete b.ajax,b.text=function(p,b){var H=L||a(this).attr(b.options.content.attr)||"Loading...",c=a.ajax(a.extend({},d,{context:b})).then(d.success,
l,d.error).then(function(a){a&&e&&b.set("content.text",a);return a},function(a,p,H){b.destroyed||a.status===0||b.set("content.text",p+": "+H)});return!e?(b.set("content.text",H),c):H}),"title"in b))if(f(b.title)||(b.button=b.title.button,b.title=b.title.text),c(b.title||i))b.title=i;"position"in p&&f(p.position)&&(p.position={my:p.position,at:p.position});"show"in p&&f(p.show)&&(p.show=p.show.jquery?{target:p.show}:p.show===g?{ready:g}:{event:p.show});"hide"in p&&f(p.hide)&&(p.hide=p.hide.jquery?
{target:p.hide}:{event:p.hide});"style"in p&&f(p.style)&&(p.style={classes:p.style});a.each(F,function(){this.sanitize&&this.sanitize(p)});return p}function h(a,b){for(var c=0,d,e=a,g=b.split(".");e=e[g[c++]];)c<g.length&&(d=e);return[d||a,g.pop()]}function w(a,b){var c,d,e;for(c in this.checks)for(d in this.checks[c])if(e=RegExp(d,"i").exec(a))if(b.push(e),"builtin"===c||this.plugins[c])this.checks[c][d].apply(this.plugins[c]||this,b)}function o(a){return I.concat("").join(a?"-"+a+" ":" ")}function t(p){if(this.tooltip.hasClass(D))return i;
clearTimeout(this.timers.show);clearTimeout(this.timers.hide);var b=a.proxy(function(){this.toggle(g,p)},this);0<this.options.show.delay?this.timers.show=setTimeout(b,this.options.show.delay):b()}function n(p){if(this.tooltip.hasClass(D))return i;var b=a(p.relatedTarget),c=b.closest(M)[0]===this.tooltip[0],d=b[0]===this.options.show.target[0];clearTimeout(this.timers.show);clearTimeout(this.timers.hide);if(this!==b[0]&&"mouse"===this.options.position.target&&c||this.options.hide.fixed&&/mouse(out|leave|move)/.test(p.type)&&
(c||d))try{p.preventDefault(),p.stopImmediatePropagation()}catch(e){}else b=a.proxy(function(){this.toggle(i,p)},this),0<this.options.hide.delay?this.timers.hide=setTimeout(b,this.options.hide.delay):b()}function v(p){if(this.tooltip.hasClass(D)||!this.options.hide.inactive)return i;clearTimeout(this.timers.inactive);this.timers.inactive=setTimeout(a.proxy(function(){this.hide(p)},this),this.options.hide.inactive)}function u(a){this.rendered&&0<this.tooltip[0].offsetWidth&&this.reposition(a)}function x(p,
b,c){a(j.body).delegate(p,(b.split?b:b.join(V+" "))+V,function(){var p=k.api[a.attr(this,K)];p&&!p.disabled&&c.apply(p,arguments)})}function E(p,b,c){var e,r,f,h=a(j.body),o=p[0]===j?h:p;r=p.metadata?p.metadata(c.metadata):l;var Y="html5"===c.metadata.type&&r?r[c.metadata.name]:l,n=p.data(c.metadata.name||"qtipopts");try{n="string"===typeof n?a.parseJSON(n):n}catch(A){}r=a.extend(g,{},k.defaults,c,"object"===typeof n?m(n):l,m(Y||r));c=r.position;r.id=b;if("boolean"===typeof r.content.text)if(e=p.attr(r.content.attr),
r.content.attr!==i&&e)r.content.text=e;else return i;c.container.length||(c.container=h);c.target===i&&(c.target=o);r.show.target===i&&(r.show.target=o);r.show.solo===g&&(r.show.solo=c.container.closest("body"));r.hide.target===i&&(r.hide.target=o);r.position.viewport===g&&(r.position.viewport=c.container);c.container=c.container.eq(0);c.at=new G(c.at,g);c.my=new G(c.my);if(p.data(y))if(r.overwrite)p.qtip("destroy");else if(r.overwrite===i)return i;p.attr(U,b);r.suppress&&(f=p.attr("title"))&&p.removeAttr("title").attr(J,
f).attr("title","");e=new d(p,r,b,!!e);p.data(y,e);p.one("remove.qtip-"+b+" removeqtip.qtip-"+b,function(){var p;(p=a(this).data(y))&&p.destroy()});return e}function z(a){return a.charAt(0).toUpperCase()+a.slice(1)}function B(a,b){var c=parseInt,d;a:{var r=b.charAt(0).toUpperCase()+b.slice(1),r=(b+" "+Z.join(r+" ")+r).split(" "),g,i,f=0;if(S[b])d=a.css(S[b]);else for(;g=r[f++];)if((i=a.css(g))!==e){d=(S[b]=g,i);break a}}return c(d,10)}function q(a,b){this._ns="tip";this.options=b;this.offset=b.offset;
this.size=[b.width,b.height];this.init(this.qtip=a)}var g=!0,i=!1,l=null,k,s,G,N,F={},y="qtip",U="data-hasqtip",K="data-qtip-id",I=["ui-widget","ui-tooltip"],M="."+y,W="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),X=y+"-fixed",T=y+"-default",O=y+"-focus",aa=y+"-hover",D=y+"-disabled",J="oldtitle",P;BROWSER={ie:function(){for(var a=3,b=j.createElement("div");(b.innerHTML="<\!--[if gt IE "+ ++a+"]><i></i><![endif]--\>")&&b.getElementsByTagName("i")[0];);return 4<a?a:
NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||i};s=d.prototype;s.render=function(b){if(this.rendered||this.destroyed)return this;var c=this,d=this.options,e=this.cache,r=this.elements,f=d.content.text,h=d.content.title,j=d.content.button,o=d.position,l="."+this._id+" ",A=[];a.attr(this.target[0],"aria-describedby",this._id);this.tooltip=r.tooltip=tooltip=a("<div/>",
{id:this._id,"class":[y,T,d.style.classes,y+"-pos-"+d.position.my.abbrev()].join(" "),width:d.style.width||"",height:d.style.height||"",tracking:"mouse"===o.target&&o.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":i,"aria-describedby":this._id+"-content","aria-hidden":g}).toggleClass(D,this.disabled).attr(K,this.id).data(y,this).appendTo(o.container).append(r.content=a("<div />",{"class":y+"-content",id:this._id+"-content","aria-atomic":g}));this.rendered=-1;this.positioning=g;h&&(this._createTitle(),
a.isFunction(h)||A.push(this._updateTitle(h,i)));j&&this._createButton();a.isFunction(f)||A.push(this._updateContent(f,i));this.rendered=g;this._setWidget();a.each(d.events,function(b,p){a.isFunction(p)&&tooltip.bind((b==="toggle"?["tooltipshow","tooltiphide"]:["tooltip"+b]).join(l)+l,p)});a.each(F,function(a){var b;if(this.initialize==="render"&&(b=this(c)))c.plugins[a]=b});this._assignEvents();a.when.apply(a,A).then(function(){c._trigger("render");c.positioning=i;!c.hiddenDuringWait&&(d.show.ready||
b)&&c.toggle(g,e.event,i);c.hiddenDuringWait=i});k.api[this.id]=this;return this};s.destroy=function(b){function c(){if(!this.destroyed){this.destroyed=g;var b=this.target,p=b.attr(J);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove();a.each(this.plugins,function(){this.destroy&&this.destroy()});clearTimeout(this.timers.show);clearTimeout(this.timers.hide);this._unassignEvents();b.removeData(y).removeAttr(K).removeAttr("aria-describedby");this.options.suppress&&p&&b.attr("title",
p).removeAttr(J);this._unbind(b);this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=l;delete k.api[this.id]}}if(this.destroyed)return this.target;b!==g&&this.rendered?(tooltip.one("tooltiphidden",a.proxy(c,this)),!this.triggering&&this.hide()):c.call(this);return this.target};N=s.checks={builtin:{"^id$":function(b,c,d,e){var d=d===g?k.nextid:d,r=y+"-"+d;d!==i&&0<d.length&&!a("#"+r).length?(this._id=r,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+
"-content",this.elements.title[0].id=this._id+"-title")):b[c]=e},"^prerender":function(a,b,c){c&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(a,b,c){this._updateContent(c)},"^content.attr$":function(a,b,c,d){this.options.content.text===this.target.attr(d)&&this._updateContent(this.target.attr(c))},"^content.title$":function(a,b,c){if(!c)return this._removeTitle();c&&!this.elements.title&&this._createTitle();this._updateTitle(c)},"^content.button$":function(a,b,c){this._updateButton(c)},
"^content.title.(text|button)$":function(a,b,c){this.set("content."+b,c)},"^position.(my|at)$":function(a,b,c){"string"===typeof c&&(a[b]=new G(c,"at"===b))},"^position.container$":function(a,b,c){this.tooltip.appendTo(c)},"^show.ready$":function(a,b,c){c&&(!this.rendered&&this.render(g)||this.toggle(g))},"^style.classes$":function(a,b,c,d){this.tooltip.removeClass(d).addClass(c)},"^style.width|height":function(a,b,c){this.tooltip.css(b,c)},"^style.widget|content.title":function(){this._setWidget()},
"^style.def":function(a,b,c){this.tooltip.toggleClass(T,!!c)},"^events.(render|show|move|hide|focus|blur)$":function(b,c,d){tooltip[(a.isFunction(d)?"":"un")+"bind"]("tooltip"+c,d)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var a=this.options.position;tooltip.attr("tracking","mouse"===a.target&&a.adjust.mouse);this._unassignEvents();this._assignEvents()}}};s.get=function(a){if(this.destroyed)return this;a=h(this.options,a.toLowerCase());a=a[0][a[1]];
return a.precedance?a.string():a};var ba=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,ca=/^prerender|show\.ready/i;s.set=function(b,c){if(this.destroyed)return this;var d=this.rendered,e=i,r=this.options,f;"string"===typeof b?(f=b,b={},b[f]=c):b=a.extend({},b);a.each(b,function(c,H){if(!d&&!ca.test(c))delete b[c];else{var g=h(r,c.toLowerCase()),i;i=g[0][g[1]];g[0][g[1]]=H&&H.nodeType?a(H):H;e=ba.test(c)||e;b[c]=[g[0],g[1],H,i]}});m(r);this.positioning=g;a.each(b,
a.proxy(w,this));this.positioning=i;this.rendered&&(0<this.tooltip[0].offsetWidth&&e)&&this.reposition("mouse"===r.position.target?l:this.cache.event);return this};s._update=function(b,c){var d=this,e=this.cache;if(!this.rendered||!b)return i;a.isFunction(b)&&(b=b.call(this.elements.target,e.event,this)||"");if(a.isFunction(b.then))return e.waiting=g,b.then(function(a){e.waiting=i;return d._update(a,c)},l,function(a){return d._update(a,c)});if(b===i||!b&&""!==b)return i;b.jquery&&0<b.length?c.children().detach().end().append(b.css({display:"block"})):
c.html(b);e.waiting=g;return(a.fn.imagesLoaded?c.imagesLoaded():a.Deferred().resolve(a([]))).done(function(a){e.waiting=i;a.length&&(d.rendered&&0<d.tooltip[0].offsetWidth)&&d.reposition(e.event,!a.length)}).promise()};s._updateContent=function(a,b){this._update(a,this.elements.content,b)};s._updateTitle=function(a,b){this._update(a,this.elements.title,b)===i&&this._removeTitle(i)};s._createTitle=function(){var b=this.elements,c=this._id+"-title";b.titlebar&&this._removeTitle();b.titlebar=a("<div />",
{"class":y+"-titlebar "+(this.options.style.widget?o("header"):"")}).append(b.title=a("<div />",{id:c,"class":y+"-title","aria-atomic":g})).insertBefore(b.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(b){a(this).toggleClass("ui-state-active ui-state-focus","down"===b.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(b){a(this).toggleClass("ui-state-hover","mouseover"===b.type)});this.options.content.button&&this._createButton()};s._removeTitle=
function(a){var b=this.elements;b.title&&(b.titlebar.remove(),b.titlebar=b.title=b.button=l,a!==i&&this.reposition())};s.reposition=function(c,d){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=g;var e=this.cache,f=this.tooltip,r=this.options.position,C=r.target,h=r.my,k=r.at,o=r.viewport,l=r.container,A=r.adjust,n=A.method.split(" "),s=f.outerWidth(i),t=f.outerHeight(i),q=0,u=0,v=f.css("position"),m={left:0,top:0},w=0<f[0].offsetWidth,x=c&&"scroll"===c.type,y=a(b),
z=l[0].ownerDocument,B=this.mouse,D,E;if(a.isArray(C)&&2===C.length)k={x:"left",y:"top"},m={left:C[0],top:C[1]};else if("mouse"===C&&(c&&c.pageX||e.event.pageX)){k={x:"left",y:"top"};c=B&&B.pageX&&(A.mouse||!c||!c.pageX)?B:(c&&("resize"===c.type||"scroll"===c.type)?e.event:c&&c.pageX&&"mousemove"===c.type?c:(!A.mouse||this.options.show.distance)&&e.origin&&e.origin.pageX?e.origin:c)||c||e.event||B||{};"static"!==v&&(m=l.offset());if(z.body.offsetWidth!==(b.innerWidth||z.documentElement.clientWidth))E=
a(z.body).offset();m={left:c.pageX-m.left+(E&&E.left||0),top:c.pageY-m.top+(E&&E.top||0)};A.mouse&&x&&(m.left-=B.scrollX-y.scrollLeft(),m.top-=B.scrollY-y.scrollTop())}else{"event"===C&&c&&c.target&&"scroll"!==c.type&&"resize"!==c.type?e.target=a(c.target):"event"!==C&&(e.target=a(C.jquery?C:elements.target));C=e.target;C=a(C).eq(0);if(0===C.length)return this;C[0]===j||C[0]===b?(q=BROWSER.iOS?b.innerWidth:C.width(),u=BROWSER.iOS?b.innerHeight:C.height(),C[0]===b&&(m={top:(o||C).scrollTop(),left:(o||
C).scrollLeft()})):F.imagemap&&C.is("area")?D=F.imagemap(this,C,k,F.viewport?n:i):F.svg&&C[0].ownerSVGElement?D=F.svg(this,C,k,F.viewport?n:i):(q=C.outerWidth(i),u=C.outerHeight(i),m=C.offset());D&&(q=D.width,u=D.height,E=D.offset,m=D.position);m=this.reposition.offset(C,m,l);if(3.1<BROWSER.iOS&&4.1>BROWSER.iOS||4.3<=BROWSER.iOS&&4.33>BROWSER.iOS||!BROWSER.iOS&&"fixed"===v)m.left-=y.scrollLeft(),m.top-=y.scrollTop();if(!D||D&&D.adjustable!==i)m.left+="right"===k.x?q:"center"===k.x?q/2:0,m.top+="bottom"===
k.y?u:"center"===k.y?u/2:0}m.left+=A.x+("right"===h.x?-s:"center"===h.x?-s/2:0);m.top+=A.y+("bottom"===h.y?-t:"center"===h.y?-t/2:0);if(F.viewport){if(m.adjusted=F.viewport(this,m,r,q,u,s,t),E&&m.adjusted.left&&(m.left+=E.left),E&&m.adjusted.top)m.top+=E.top}else m.adjusted={left:0,top:0};if(!this._trigger("move",[m,o.elem||o],c))return this;delete m.adjusted;d===i||!w||isNaN(m.left)||isNaN(m.top)||"mouse"===C||!a.isFunction(r.effect)?f.css(m):a.isFunction(r.effect)&&(r.effect.call(f,this,a.extend({},
m)),f.queue(function(b){a(this).css({opacity:"",height:""});BROWSER.ie&&this.style.removeAttribute("filter");b()}));this.positioning=i;return this};s.reposition.offset=function(b,c,d){if(!d[0])return c;var b=a(b[0].ownerDocument),e=!!BROWSER.ie&&"CSS1Compat"!==j.compatMode,d=d[0],r,g,f;do if("static"!==(g=a.css(d,"position"))){if("fixed"===g){g=d.getBoundingClientRect();var i=b;c.left+=-1*i.scrollLeft();c.top+=-1*i.scrollTop()}else g=a(d).position(),g.left+=parseFloat(a.css(d,"borderLeftWidth"))||
0,g.top+=parseFloat(a.css(d,"borderTopWidth"))||0;c.left-=g.left+(parseFloat(a.css(d,"marginLeft"))||0);c.top-=g.top+(parseFloat(a.css(d,"marginTop"))||0);if(!r&&"hidden"!==(f=a.css(d,"overflow"))&&"visible"!==f)r=a(d)}while(d=d.offsetParent);if(r&&(r[0]!==b[0]||e))c.left+=1*r.scrollLeft(),c.top+=1*r.scrollTop();return c};var Q=(G=s.reposition.Corner=function(a,b){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase();this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase();
this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();this.forceY=!!b;var c=a.charAt(0);this.precedance="t"===c||"b"===c?"y":"x"}).prototype;Q.invert=function(a,b){this[a]="left"===this[a]?"right":"right"===this[a]?"left":b||this[a]};Q.string=function(){var a=this.x,b=this.y;return a===b?a:"y"===this.precedance||this.forceY&&"center"!==b?b+" "+a:a+" "+b};Q.abbrev=function(){var a=this.string().split(" ");return a[0].charAt(0)+(a[1]&&a[1].charAt(0)||"")};Q.clone=function(){return new G(this.string(),
this.forceY)};s.toggle=function(b,c,d){var e=this.cache,r=this.options,f=this.tooltip;if(c){if(/over|enter/.test(c.type)&&/out|leave/.test(e.event.type)&&r.show.target.add(c.target).length===r.show.target.length&&f.has(c.relatedTarget).length)return this;e.event=a.extend({},c)}this.waiting&&!b&&(this.hiddenDuringWait=g);if(this.rendered){if(this.destroyed||this.disabled)return this}else return b?this.render(1):this;var r=b?"show":"hide",h=this.options[r],k=this.options.position,m=this.options.content,
o=this.tooltip.css("width"),A=0<this.tooltip[0].offsetWidth,n=b||1===h.target.length,q=!c||2>h.target.length||e.target[0]===c.target;(typeof b).search("boolean|number")&&(b=!A);A=!f.is(":animated")&&A===b&&q;q=!A?!!this._trigger(r,[90]):l;q!==i&&b&&this.focus(c);if(!q||A)return this;a.attr(f[0],"aria-hidden",!b);b?(e.origin=a.extend({},this.mouse),a.isFunction(m.text)&&this._updateContent(m.text,i),a.isFunction(m.title)&&this._updateTitle(m.title,i),!P&&("mouse"===k.target&&k.adjust.mouse)&&(a(j).bind("mousemove."+
y,this._storeMouse),P=g),o||f.css("width",f.outerWidth(i)),this.reposition(c,d),o||f.css("width",""),h.solo&&("string"===typeof h.solo?a(h.solo):a(M,h.solo)).not(f).not(h.target).qtip("hide",a.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete e.origin,P&&!a(M+'[tracking="true"]:visible',h.solo).not(f).length&&(a(j).unbind("mousemove."+y),P=i),this.blur(c));after=a.proxy(function(){if(b){BROWSER.ie&&f[0].style.removeAttribute("filter");f.css("overflow","");"string"===typeof h.autofocus&&
a(this.options.show.autofocus,f).focus();this.options.show.target.trigger("qtip-"+this.id+"-inactive")}else f.css({display:"",visibility:"",opacity:"",left:"",top:""});this._trigger(b?"visible":"hidden")},this);h.effect===i||n===i?(f[r](),after()):a.isFunction(h.effect)?(f.stop(1,1),h.effect.call(f,this),f.queue("fx",function(a){after();a()})):f.fadeTo(90,b?1:0,after);b&&h.target.trigger("qtip-"+this.id+"-inactive");return this};s.show=function(a){return this.toggle(g,a)};s.hide=function(a){return this.toggle(i,
a)};s.focus=function(b){if(!this.rendered||this.destroyed)return this;var c=a(M),d=this.tooltip,e=parseInt(d[0].style.zIndex,10),f=k.zindex+c.length;!d.hasClass(O)&&this._trigger("focus",[f],b)&&(e!==f&&(c.each(function(){this.style.zIndex>e&&(this.style.zIndex-=1)}),c.filter("."+O).qtip("blur",b)),d.addClass(O)[0].style.zIndex=f);return this};s.blur=function(a){if(!this.rendered||this.destroyed)return this;this.tooltip.removeClass(O);this._trigger("blur",[this.tooltip.css("zIndex")],a);return this};
s.disable=function(a){if(this.destroyed)return this;"boolean"!==typeof a&&(a=!(this.tooltip.hasClass(D)||this.disabled));this.rendered&&this.tooltip.toggleClass(D,a).attr("aria-disabled",a);this.disabled=!!a;return this};s.enable=function(){return this.disable(i)};s._createButton=function(){var b=this,c=this.elements,d=c.tooltip,e=this.options.content.button,f="string"===typeof e?e:"Close tooltip";c.button&&c.button.remove();c.button=e.jquery?e:a("<a />",{"class":"qtip-close "+(this.options.style.widget?
"":y+"-icon"),title:f,"aria-label":f}).prepend(a("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"}));c.button.appendTo(c.titlebar||d).attr("role","button").click(function(a){d.hasClass(D)||b.hide(a);return i})};s._updateButton=function(a){if(!this.rendered)return i;var b=this.elements.button;a?this._createButton():b.remove()};s._setWidget=function(){var a=this.options.style.widget,b=this.elements,c=b.tooltip,d=c.hasClass(D);c.removeClass(D);D=a?"ui-state-disabled":"qtip-disabled";c.toggleClass(D,
d);c.toggleClass("ui-helper-reset "+o(),a).toggleClass(T,this.options.style.def&&!a);b.content&&b.content.toggleClass(o("content"),a);b.titlebar&&b.titlebar.toggleClass(o("header"),a);b.button&&b.button.toggleClass(y+"-icon",!a)};s._storeMouse=function(a){this.mouse={pageX:a.pageX,pageY:a.pageY,type:"mousemove",scrollX:b.pageXOffset||j.body.scrollLeft||j.documentElement.scrollLeft,scrollY:b.pageYOffset||j.body.scrollTop||j.documentElement.scrollTop}};s._bind=function(b,c,d,e,f){e="."+this._id+(e?
"-"+e:"");c.length&&a(b).bind((c.split?c:c.join(e+" "))+e,a.proxy(d,f||this))};s._unbind=function(b,c){a(b).unbind("."+this._id+(c?"-"+c:""))};var V="."+y;a(function(){x(M,["mouseenter","mouseleave"],function(b){var c="mouseenter"===b.type,d=a(b.currentTarget),e=a(b.relatedTarget||b.target),f=this.options;c?(this.focus(b),d.hasClass(X)&&!d.hasClass(D)&&clearTimeout(this.timers.hide)):"mouse"===f.position.target&&(f.hide.event&&f.show.target&&!e.closest(f.show.target[0]).length)&&this.hide(b);d.toggleClass(aa,
c)});x("["+K+"]",W,v)});s._trigger=function(b,c,d){b=a.Event("tooltip"+b);b.originalEvent=d&&a.extend({},d)||this.cache.event||l;this.triggering=g;this.tooltip.trigger(b,[this].concat(c||[]));this.triggering=i;return!b.isDefaultPrevented()};s._assignEvents=function(){var c=this.options,d=c.position,e=this.tooltip,f=c.show.target,g=c.hide.target,i=d.container,h=d.viewport,m=a(j);a(j.body);var o=a(b),l=c.show.event?a.trim(""+c.show.event).split(" "):[],A=c.hide.event?a.trim(""+c.hide.event).split(" "):
[],q=[];/mouse(out|leave)/i.test(c.hide.event)&&"window"===c.hide.leave&&this._bind(m,["mouseout","blur"],function(a){!/select|option/.test(a.target.nodeName)&&!a.relatedTarget&&this.hide(a)});c.hide.fixed?g=g.add(e.addClass(X)):/mouse(over|enter)/i.test(c.show.event)&&this._bind(g,"mouseleave",function(){clearTimeout(this.timers.show)});-1<(""+c.hide.event).indexOf("unfocus")&&this._bind(i.closest("html"),["mousedown","touchstart"],function(b){var c=a(b.target),d=this.rendered&&!this.tooltip.hasClass(D)&&
0<this.tooltip[0].offsetWidth,e=0<c.parents(M).filter(this.tooltip[0]).length;c[0]!==this.target[0]&&(c[0]!==this.tooltip[0]&&!e&&!this.target.has(c[0]).length&&d)&&this.hide(b)});"number"===typeof c.hide.inactive&&(this._bind(f,"qtip-"+this.id+"-inactive",v),this._bind(g.add(e),k.inactiveEvents,v,"-inactive"));A=a.map(A,function(b){var c=a.inArray(b,l);if(c>-1&&g.add(f).length===g.length)q.push(l.splice(c,1)[0]);else return b});this._bind(f,l,t);this._bind(g,A,n);this._bind(f,q,function(a){(this.tooltip[0].offsetWidth>
0?n:t).call(this,a)});this._bind(f.add(e),"mousemove",function(a){if("number"===typeof c.hide.distance){var b=this.cache.origin||{},d=this.options.hide.distance,e=Math.abs;(e(a.pageX-b.pageX)>=d||e(a.pageY-b.pageY)>=d)&&this.hide(a)}this._storeMouse(a)});"mouse"===d.target&&d.adjust.mouse&&(c.hide.event&&this._bind(f,["mouseenter","mouseleave"],function(a){this.cache.onTarget=a.type==="mouseenter"}),this._bind(m,"mousemove",function(a){this.rendered&&(this.cache.onTarget&&!this.tooltip.hasClass(D)&&
this.tooltip[0].offsetWidth>0)&&this.reposition(a)}));if(d.adjust.resize||h.length)this._bind(a.event.special.resize?h:o,"resize",u);d.adjust.scroll&&this._bind(o.add(d.container),"scroll",u)};s._unassignEvents=function(){var c=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&this.tooltip[0],this.options.position.container[0],this.options.position.viewport[0],this.options.position.container.closest("html")[0],b,j];this.rendered?this._unbind(a([]).pushStack(a.grep(c,function(a){return"object"===
typeof a}))):a(c[0]).unbind("."+this._id+"-create")};k=a.fn.qtip=function(b,c,d){var f=(""+b).toLowerCase(),h=l,j=a.makeArray(arguments).slice(1),o=j[j.length-1],n=this[0]?a.data(this[0],y):l;if(!arguments.length&&n||"api"===f)return n;if("string"===typeof b)return this.each(function(){var b=a.data(this,y);if(!b)return g;o&&o.timeStamp&&(b.cache.event=o);if(c&&("option"===f||"options"===f))if(d!==e||a.isPlainObject(c))b.set(c,d);else return h=b.get(c),i;else b[f]&&b[f].apply(b,j)}),h!==l?h:this;if("object"===
typeof b||!arguments.length)return n=m(a.extend(g,{},b)),k.bind.call(this,n,o)};k.bind=function(b,c){return this.each(function(d){var f,h,j,m;function o(b){function c(){A.render("object"===typeof b||l.show.ready);j.add(m).unbind(n)}if(A.disabled)return i;A.cache.event=a.extend({},b);A.cache.target=b?a(b.target):[e];0<l.show.delay?(clearTimeout(A.timers.show),A.timers.show=setTimeout(c,l.show.delay),f!==h&&m.bind(h,function(){clearTimeout(A.timers.show)})):c()}var l,n,A,d=a.isArray(b.id)?b.id[d]:b.id,
d=!d||d===i||1>d.length||k.api[d]?k.nextid++:d;n=".qtip-"+d+"-create";A=E(a(this),d,b);if(A===i)return g;k.api[d]=A;l=A.options;a.each(F,function(){"initialize"===this.initialize&&this(A)});j=l.show.target;m=l.hide.target;f=a.trim(""+l.show.event).replace(/ /g,n+" ")+n;h=a.trim(""+l.hide.event).replace(/ /g,n+" ")+n;/mouse(over|enter)/i.test(f)&&!/mouse(out|leave)/i.test(h)&&(h+=" mouseleave"+n);j.bind("mousemove"+n,function(a){A._storeMouse(a);A.cache.onTarget=g});j.bind(f,o);(l.show.ready||l.prerender)&&
o(c)})};k.api={};a.each({attr:function(b,c){if(this.length){var d=this[0],e=a.data(d,"qtip");if("title"===b&&e&&"object"===typeof e&&e.options.suppress){if(2>arguments.length)return a.attr(d,J);e&&("title"===e.options.content.attr&&e.cache.attr)&&e.set("content.text",c);return this.attr(J,c)}}return a.fn.attr_replacedByqTip.apply(this,arguments)},clone:function(b){a([]);var c=a.fn.clone_replacedByqTip.apply(this,arguments);b||c.filter("["+J+"]").attr("title",function(){return a.attr(this,J)}).removeAttr(J);
return c}},function(b,c){if(!c||a.fn[b+"_replacedByqTip"])return g;var d=a.fn[b+"_replacedByqTip"]=a.fn[b];a.fn[b]=function(){return c.apply(this,arguments)||d.apply(this,arguments)}});a.ui||(a.cleanData_replacedByqTip=a.cleanData,a.cleanData=function(b){for(var c=0,d;(d=a(b[c])).length;c++)if(d.attr(U))try{d.triggerHandler("removeqtip")}catch(e){}a.cleanData_replacedByqTip.apply(this,arguments)});k.version="2.1.1";k.nextid=0;k.inactiveEvents=W;k.zindex=15E3;k.defaults={prerender:i,id:i,overwrite:g,
suppress:g,content:{text:g,attr:"title",title:i,button:i},position:{my:"top left",at:"bottom right",target:i,container:i,viewport:i,adjust:{x:0,y:0,mouse:g,scroll:g,resize:g,method:"flipinvert flipinvert"},effect:function(b,c){a(this).animate(c,{duration:200,queue:i})}},show:{target:i,event:"mouseenter",effect:g,delay:90,solo:i,ready:i,autofocus:i},hide:{target:i,event:"mouseleave",effect:g,delay:0,fixed:i,inactive:i,leave:"window",distance:i},style:{classes:"",widget:i,width:i,height:i,def:g},events:{render:l,
move:l,show:l,hide:l,toggle:l,visible:l,hidden:l,focus:l,blur:l}};var R=!!j.createElement("canvas").getContext,da=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,S={},Z=["Webkit","O","Moz","ms"];R||(createVML=function(a,b,c){return"<qtipvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+(c||"")+'" />'});a.extend(q.prototype,{init:function(b){var c,d;d=this.element=b.elements.tip=a("<div />",{"class":y+"-tip"}).prependTo(b.tooltip);if(R){c=
a("<canvas />").appendTo(this.element)[0].getContext("2d");c.lineJoin="miter";c.miterLimit=100;c.save()}else{c=createVML("shape",'coordorigin="0,0"',"position:absolute;");this.element.html(c+c);b._bind(a("*",d).add(d),["click","mousedown"],function(a){a.stopPropagation()},this._ns)}b._bind(b.tooltip,"tooltipmove",this.reposition,this._ns,this);this.create()},_swapDimensions:function(){this.size[0]=this.options.height;this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width;
this.size[1]=this.options.height},_useTitle:function(a){var b=this.qtip.elements.titlebar;return b&&(a.y==="top"||a.y==="center"&&this.element.position().top+this.size[1]/2+this.options.offset<b.outerHeight(g))},_parseCorner:function(a){var b=this.qtip.options.position.my;if(a===i||b===i)a=i;else if(a===g)a=new G(b.string());else if(!a.string){a=new G(a);a.fixed=g}return a},_parseWidth:function(a,b,c){var d=this.qtip.elements,b="border"+z(b)+"Width";return(c?B(c,b):B(d.content,b)||B(this._useTitle(a)&&
d.titlebar||d.content,b)||B(tooltip,b))||0},_parseRadius:function(a){var b=this.qtip.elements,c="border"+z(a.y)+z(a.x)+"Radius";return BROWSER.ie<9?0:B(this._useTitle(a)&&b.titlebar||b.content,c)||B(b.tooltip,c)||0},_invalidColour:function(a,b,c){b=a.css(b);return!b||c&&b===a.css(c)||da.test(b)?i:b},_parseColours:function(b){var c=this.qtip.elements,d=this.element.css("cssText",""),e="border"+z(b[b.precedance])+z("color"),b=this._useTitle(b)&&c.titlebar||c.content,f=this._invalidColour,g=[];g[0]=
f(d,"background-color")||f(b,"background-color")||f(c.content,"background-color")||f(tooltip,"background-color")||d.css("background-color");g[1]=f(d,e,"color")||f(b,e,"color")||f(c.content,e,"color")||f(tooltip,e,"color")||tooltip.css(e);a("*",d).add(d).css("cssText","background-color:transparent !important;border:0 !important;");return g},_calculateSize:function(a){var b=a.precedance==="y",c=this.options[b?"height":"width"],d=this.options[b?"width":"height"],e=a.abbrev()==="c",f=c*(e?0.5:1),g=Math.pow,
a=Math.round,i=Math.sqrt(g(f,2)+g(d,2)),f=[this.border/f*i,this.border/d*i];f[2]=Math.sqrt(g(f[0],2)-g(this.border,2));f[3]=Math.sqrt(g(f[1],2)-g(this.border,2));e=(i+f[2]+f[3]+(e?0:f[0]))/i;c=[a(e*c),a(e*d)];return b?c:c.reverse()},_calculateTip:function(a){var b=this.size[0],c=this.size[1],d=Math.ceil(b/2),e=Math.ceil(c/2),b={br:[0,0,b,c,b,0],bl:[0,0,b,0,0,c],tr:[0,c,b,0,b,c],tl:[0,0,0,c,b,c],tc:[0,c,d,0,b,c],bc:[0,0,b,0,d,c],rc:[0,0,b,e,0,c],lc:[b,0,b,c,0,e]};b.lt=b.br;b.rt=b.bl;b.lb=b.tr;b.rb=
b.tl;return b[a.abbrev()]},create:function(){var a=this.corner=(R||BROWSER.ie)&&this._parseCorner(this.options.corner);if(this.enabled=!!this.corner&&this.corner.abbrev()!=="c"){this.qtip.cache.corner=a.clone();this.update()}this.element.toggle(this.enabled);return this.corner},update:function(b,c){if(!this.enabled)return this;var d=this.element,e=d.children(),f=this.options,h=this.size,j=f.mimic,k=Math.round,m,o,l,n;b||(b=this.qtip.cache.corner||this.corner);if(j===i)j=b;else{j=new G(j);j.precedance=
b.precedance;j.x==="inherit"?j.x=b.x:j.y==="inherit"?j.y=b.y:j.x===j.y&&(j[b.precedance]=b[b.precedance])}o=j.precedance;b.precedance==="x"?this._swapDimensions():this._resetDimensions();m=this.color=this._parseColours(b);if(m[1]!=="transparent"){n=this.border=this._parseWidth(b,b[b.precedance]);f.border&&n<1&&(m[0]=m[1]);this.border=n=f.border!==g?f.border:n}else this.border=n=0;l=this._calculateTip(j);f=this.size=this._calculateSize(b);d.css({width:f[0],height:f[1],lineHeight:f[1]+"px"});d=b.precedance===
"y"?[k(j.x==="left"?n:j.x==="right"?f[0]-h[0]-n:(f[0]-h[0])/2),k(j.y==="top"?f[1]-h[1]:0)]:[k(j.x==="left"?f[0]-h[0]:0),k(j.y==="top"?n:j.y==="bottom"?f[1]-h[1]-n:(f[1]-h[1])/2)];if(R){e.attr("width",f[0]).attr("height",f[1]);e=e[0].getContext("2d");e.restore();e.save();e.clearRect(0,0,3E3,3E3);e.fillStyle=m[0];e.strokeStyle=m[1];e.lineWidth=n*2;e.translate(d[0],d[1]);e.beginPath();e.moveTo(l[0],l[1]);e.lineTo(l[2],l[3]);e.lineTo(l[4],l[5]);e.closePath();if(n){if(tooltip.css("background-clip")===
"border-box"){e.strokeStyle=m[0];e.stroke()}e.strokeStyle=m[1];e.stroke()}e.fill()}else{l="m"+l[0]+","+l[1]+" l"+l[2]+","+l[3]+" "+l[4]+","+l[5]+" xe";d[2]=n&&/^(r|b)/i.test(b.string())?BROWSER.ie===8?2:1:0;e.css({coordsize:h[0]+n+" "+(h[1]+n),antialias:""+(j.string().indexOf("center")>-1),left:d[0]-d[2]*Number(o==="x"),top:d[1]-d[2]*Number(o==="y"),width:h[0]+n,height:h[1]+n}).each(function(b){var c=a(this);c[c.prop?"prop":"attr"]({coordsize:h[0]+n+" "+(h[1]+n),path:l,fillcolor:m[0],filled:!!b,stroked:!b}).toggle(!(!n&&
!b));!b&&c.html(createVML("stroke",'weight="'+n*2+'px" color="'+m[1]+'" miterlimit="1000" joinstyle="miter"'))})}c!==i&&this.calculate(b)},calculate:function(b){if(!this.enabled)return i;var c=this,d=this.qtip.elements,e=this.element,f=this.options.offset;this.qtip.tooltip.hasClass("ui-widget");var g={},h,j,l,b=b||this.corner;h=b.precedance;j=this._calculateSize(b);l=[b.x,b.y];h==="x"&&l.reverse();a.each(l,function(a,e){var i,l,m;if(e==="center"){i=h==="y"?"left":"top";g[i]="50%";g["margin-"+i]=-Math.round(j[h===
"y"?0:1]/2)+f}else{i=c._parseWidth(b,e,d.tooltip);l=c._parseWidth(b,e,d.content);m=c._parseRadius(b);g[e]=Math.max(-c.border,a?l:f+(m>i?m:-i))}});g[b[h]]=g[b[h]]-j[h==="x"?0:1];e.css({margin:"",top:"",bottom:"",left:"",right:""}).css(g);return g},reposition:function(a,b,c){if(this.enabled){var a=b.cache,d=this.corner.clone(),f=c.adjusted,h=b.options.position.adjust.method.split(" "),b=h[0],h=h[1]||h[0],j=i,l=i,m=0,n=0,k,o={},q;if(this.corner.fixed!==g){if(b==="shift"&&d.precedance==="x"&&f.left&&
d.y!=="center")d.precedance=d.precedance==="x"?"y":"x";else if(b!=="shift"&&f.left)d.x=d.x==="center"?f.left>0?"left":"right":d.x==="left"?"right":"left";if(h==="shift"&&d.precedance==="y"&&f.top&&d.x!=="center")d.precedance=d.precedance==="y"?"x":"y";else if(h!=="shift"&&f.top)d.y=d.y==="center"?f.top>0?"top":"bottom":d.y==="top"?"bottom":"top";d.string()!==a.corner.string()&&(a.cornerTop!==f.top||a.cornerLeft!==f.left)&&this.update(d,i)}k=this.calculate(d,f);if(k.right!==e)k.left=-k.right;if(k.bottom!==
e)k.top=-k.bottom;k.user=this.offset;if(j=b==="shift"&&!!f.left)if(d.x==="center")o["margin-left"]=m=k["margin-left"]-f.left;else{q=k.right!==e?[f.left,-k.left]:[-f.left,k.left];if((m=Math.max(q[0],q[1]))>q[0]){c.left=c.left-f.left;j=i}o[k.right!==e?"right":"left"]=m}if(l=h==="shift"&&!!f.top)if(d.y==="center")o["margin-top"]=n=k["margin-top"]-f.top;else{q=k.bottom!==e?[f.top,-k.top]:[-f.top,k.top];if((n=Math.max(q[0],q[1]))>q[0]){c.top=c.top-f.top;l=i}o[k.bottom!==e?"bottom":"top"]=n}this.element.css(o).toggle(!(m&&
n||d.x==="center"&&n||d.y==="center"&&m));c.left=c.left-(k.left.charAt?k.user:b!=="shift"||l||!j&&!l?k.left:0);c.top=c.top-(k.top.charAt?k.user:h!=="shift"||j||!j&&!l?k.top:0);a.cornerLeft=f.left;a.cornerTop=f.top;a.corner=d.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns);this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}});s=F.tip=function(a){return new q(a,a.options.style.tip)};s.initialize="render";s.sanitize=function(a){if(a.style&&"tip"in
a.style){opts=a.style.tip;if(typeof opts!=="object")opts=a.style.tip={corner:opts};if(!/string|boolean/i.test(typeof opts.corner))opts.corner=g}};N.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create();this.qtip.reposition()},"^style.tip.(height|width)$":function(a){this.size=size=[a.width,a.height];this.update();this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}};a.extend(g,k.defaults,{style:{tip:{corner:g,mimic:i,width:6,height:6,border:g,
offset:0}}})})})(window,document);
(function(b){b(void 0).ready(function(){b("div#logo").hmm_logo({height_toggle:1,column_width:34,column_info:"#col_info",scaled_max:!0,help:1});0<b(".canvas_logo").length&&!/^.*?Helvetica Neue/.test(b(".canvas_logo").css("font-family"))&&b(".logo_wrapper").after('<div class="offset1 span11"><div id="message" class="alert alert-error"><span>It looks like you have set your browser to prevent loading fonts chosen by us. This may cause a significant drop in the quality of the logo rendered. For the best logo, we recommend allowing this site to choose its own fonts. Information on how to do this should be provided in the help documentation provided with your browser.</span></div></div>');0<
b("#joyRideTipContent").length&&(b("#joyRideTipContent").joyride({autoStart:!0,localStorage:!1,localStorageKey:"joyride",postRideCallback:function(){b(".tour_control").show("slow")},preRideCallback:function(){b(".tour_control").hide()}}),b("#restart").on("click",function(){b("#joyRideTipContent").joyride("restart")}));if(window.FileReader)if(0<b("#file_upload").length&&1<=b("#file_upload").get(0).files.length){var j=new FileReader;j.onload=function(e){/^[\n\r\s]*HMMER/.test(e.target.result)&&/\/\/[\n\r\s]*$/.test(e.target.result)&&
b(".processing").hide()};j.readAsText(b("#file_upload").get(0).files[0])}else b("#previous").data("type")?"hmm"===b("#previous").data("type")&&b(".processing").hide():b(".processing").hide();b("#file_upload").on("change",function(){if(window.FileReader&&this.files.length>=1){var e=new FileReader;e.onload=function(a){if(/^[\n\r\s]*HMMER/.test(a.target.result)&&/\/\/[\n\r\s]*$/.test(a.target.result)){b("#hmm_process").prop("checked",true);b(".processing").hide()}else b(".processing").show()};e.readAsText(this.files[0])}});
b.fn.tooltip=function(){b(this).each(function(){b(this).click(function(a){a.preventDefault()});var e=b("<p>");e.append(b(this).attr("title"));e.append("<br/>").append(b("<a>more</a>").attr("href",b(this).attr("href"))).html();b(this).qtip({content:{text:e},style:{classes:"qtip-bootstrap"},position:{my:"center left",at:"center right",target:b(this)},hide:{fixed:true,delay:1E3,event:"mouseleave"},show:{solo:true}})});return this};b(".help").tooltip();b("#showcase").carousel()})})(jQuery);
